
/**
 * jquery.verySimpleImageViewer.js
 * Ver. : 1.0.0 
 * last update: 29/04/2018
 * Author: meshesha , https://github.com/meshesha
 * LICENSE: MIT
 * url:https://meshesha.github.io/verySimpleImageViewer
 */
!function(e){function t(e,t){if("number"==typeof e)return e;var n=e.indexOf(t);return parseInt(e.substring(0,-1!=n?n:e.length))}function n(e){var t=0,n=0;return e||(e=window.event),e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),[t,n]}e.fn.verySimpleImageViewer=function(o){var r=e.extend({imageSource:"",frame:["720px","480px",!0],maxZoom:"300%",zoomFactor:"10%",mouse:!0,keyboard:!0,toolbar:!0,rotateToolbar:!1},o),i=r.imageSource,a=r.frame,m=r.maxZoom,l=r.zoomFactor,s=r.mouse,u=r.keyboard,d=r.toolbar,c=r.rotateToolbar,A=this,f=e(this)[0],p=null,h=0;A.frameElement=null;var g,v,w=0,y=null,E=5;if(A.getFrameDimension=function(){return[A.frameElement.clientWidth,A.frameElement.clientHeight]},A.setDimension=function(e,t){p.width=Math.round(e),p.height=Math.round(t)},A.getDimension=function(){return[p.width,p.height]},A.setPosition=function(e,t){p.style.left=Math.round(e)+"px",p.style.top=Math.round(t)+"px"},A.getPosition=function(){return[t(p.style.left,"px"),t(p.style.top,"px")]},A.setMouseCursor=function(){var e=A.getDimension(),t=A.getFrameDimension(),n="crosshair";e[0]>t[0]&&e[1]>t[1]?n="move":e[0]>t[0]?n="e-resize":e[1]>t[1]&&(n="n-resize"),p.style.cursor=n},A.maxZoomCheck=function(e,t){if(void 0===e||void 0===t){var n=A.getDimension();e=n[0],t=n[1]}return"number"==typeof m?e/g>m||t/v>m:"object"==typeof m?e>m[0]||t>m[1]:void 0},A.fitToFrame=function(e,t){void 0!==e&&void 0!==t||(e=g,t=v);var n,o,r=A.getFrameDimension();return n=r[0],(o=Math.round(n*t/e))>r[1]&&(o=r[1],n=Math.round(o*e/t)),[n,o]},A.getZoomLevel=function(){return w},A.zoomTo=function(e,t,n){var o=A.getFrameDimension();if(e<0||t<0||n<0||t>=o[0]||n>=o[1])return!1;for(var r=A.fitToFrame(g,v),i=e;i>0;i--)r[0]*=l,r[1]*=l;var a=p.width,m=p.height,s=A.getPosition();return s[0]-=(t-s[0])*(r[0]/a-1),s[1]-=(n-s[1])*(r[1]/m-1),s=A.centerImage(r[0],r[1],s[0],s[1]),!A.maxZoomCheck(r[0],r[1])&&(w=e,A.setDimension(r[0],r[1]),A.setPosition(s[0],s[1]),A.setMouseCursor(),!0)},A.centerImage=function(e,t,n,o){var r;void 0!==e&&void 0!==t||(e=(r=A.getDimension())[0],t=r[1]);void 0!==n&&void 0!==o||(n=(r=A.getPosition())[0],o=r[1]);var i=A.getFrameDimension();return e<=i[0]&&(n=Math.round((i[0]-e)/2)),t<=i[1]&&(o=Math.round((i[1]-t)/2)),e>i[0]&&(n>0?n=0:n+e<i[0]&&(n=i[0]-e)),t>i[1]&&(o>0?o=0:o+t<i[1]&&(o=i[1]-t)),[n,o]},A.rotate=function(t,n){"1"==t?h+=90:h-=90,n?e("."+A.frameElement.className+" .jqvsiv_main_image_content").css("transform","rotate(0deg)"):e("."+A.frameElement.className+" .jqvsiv_main_image_content").css("transform","rotate("+h+"deg)")},A.reset=function(){var e=A.fitToFrame(g,v),t=A.centerImage(e[0],e[1],0,0);A.setDimension(e[0],e[1]),A.setPosition(t[0],t[1]),w=0,A.rotate("1",!0)},A.onmousewheel=function(e,t,o){if(A.frameElement.focus(),e?e.preventDefault&&e.preventDefault():(e=window.event).returnValue=!1,w+o>=0){var r=n(e),i=function(e){var t,n;if(objectCopy=e,e.offsetParent){t=n=0;do{t+=e.offsetLeft,""!=e.style.borderLeftWidth?t+=parseInt(e.style.borderLeftWidth):e.style.borderLeftWidth="0px",n+=e.offsetTop,""!=e.style.borderTopWidth?n+=parseInt(e.style.borderTopWidth):e.style.borderTopWidth="0px"}while(e=e.offsetParent)}return[t-parseInt(objectCopy.style.borderLeftWidth),n-parseInt(objectCopy.style.borderLeftWidth)]}(A.frameElement);A.zoomTo(w+o,r[0]-i[0],r[1]-i[1])}},A.onmousemove=function(e){e?e.preventDefault&&e.preventDefault():(e=window.event).returnValue=!1;var t=n(e),o=A.getPosition();o[0]+=t[0]-y[0],o[1]+=t[1]-y[1],y=t,o=A.centerImage(p.width,p.height,o[0],o[1]),A.setPosition(o[0],o[1])},A.onmouseup_or_out=function(e){e?e.preventDefault&&e.preventDefault():(e=window.event).returnValue=!1,p.onmousemove=p.onmouseup=p.onmouseout=null,p.onmousedown=A.onmousedown},A.onmousedown=function(e){A.frameElement.focus(),e?e.preventDefault&&e.preventDefault():(e=window.event).returnValue=!1,y=n(e),p.onmousemove=A.onmousemove,p.onmouseup=p.onmouseout=A.onmouseup_or_out},A.onkeypress=function(e){var t;window.event?(t=(e=window.event).keyCode,e.returnValue=!1):e.which&&(t=e.which,e.preventDefault()),t=String.fromCharCode(t);var n=A.getPosition();"a"==t?n[0]+=E:"w"==t?n[1]+=E:"d"==t?n[0]-=E:"s"==t?n[1]-=E:"c"==t||"C"==t?A.reset():"="==t||"+"==t||"x"==t||"X"==t?A.zoomTo(w+1,A.frameElement.clientWidth/2,A.frameElement.clientHeight/2):("-"==t||"z"==t||"Z"==t)&&w>0&&A.zoomTo(w-1,A.frameElement.clientWidth/2,A.frameElement.clientHeight/2),"a"!=t&&"w"!=t&&"d"!=t&&"s"!=t||(n=A.centerImage(p.width,p.height,n[0],n[1]),A.setPosition(n[0],n[1]),E+=2)},A.onkeyup=function(e){E=5},A.setZoomProp=function(e,n){null==e&&(l=10),l=1+t(e,"%")/100,"string"==typeof n?m=t(n,"%")/100:"object"==typeof n&&null!=n?(m[0]=t(n[0],"px"),m[1]=t(n[1],"px")):m="300%"},A.initImage=function(){p.style.maxWidth=p.style.width=p.style.maxHeight=p.style.height=null,g=p.width,v=p.height;var e=A.fitToFrame(g,v);A.setDimension(e[0],e[1]),1==a[2]&&(A.frameElement.style.width=Math.round(e[0])+"px"),1==a[3]&&(A.frameElement.style.height=Math.round(e[1])+"px");var t=A.centerImage(e[0],e[1],0,0);A.setPosition(t[0],t[1]),A.setMouseCursor(),s&&((new function(){var e=function(e,t,n){};this.wheelHandler=function(t){var n=0;t||(t=window.event),t.wheelDelta?n=t.wheelDelta/120:t.detail&&(n=-t.detail/3),t.preventDefault&&t.preventDefault(),t.returnValue=!1,n&&e(t,this,n)},this.init=function(t,n){t.addEventListener&&t.addEventListener("DOMMouseScroll",this.wheelHandler,!1),t.onmousewheel=this.wheelHandler,e=n},this.setCallback=function(t){e=t}}).init(p,A.onmousewheel),p.onmousedown=A.onmousedown),u&&(A.frameElement.onkeypress=A.onkeypress,A.frameElement.onkeyup=A.onkeyup),d&&A.loadToolbar(A)},A.setZoomProp(l,m),A.frameElement=document.createElement("div"),A.frameElement.className="image_viewer_inner_container",A.frameElement.style.width=a[0],A.frameElement.style.height=a[1],A.frameElement.style.border="0px solid #000",A.frameElement.style.margin="0px",A.frameElement.style.padding="0px",A.frameElement.style.overflow="hidden",A.frameElement.style.position="relative",A.frameElement.style.zIndex=2,A.frameElement.tabIndex=1,null!=p)null!=f?(p.parentNode.removeChild(p),f.appendChild(A.frameElement)):p.parentNode.replaceChild(A.frameElement,p),p.style.margin=p.style.padding="0",p.style.borderWidth="0px",p.style.position="absolute",p.style.zIndex=3,A.frameElement.appendChild(p);else{null!=f&&f.appendChild(A.frameElement);var C=document.createElement("div");C.className="jqvsiv_main_image_content",(p=document.createElement("img")).style.position="absolute",p.style.zIndex=3,C.appendChild(p),A.frameElement.appendChild(C),p.onload=A.initImage,p.src=i}A.loadToolbar=function(e){var t=document.createElement("div");t.className="jqvsiv_toolbar";var n=function(e){var t;return e.keyCode?(t=e.keyCode,e.returnValue=!1):e.which&&(t=e.which,e.preventDefault()),13==t},o=document.createElement("img");o.className="jqvsiv_toolbarButton",o.title="Zoom in",o.tabIndex="1",o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABN0lEQVRIic3WMW6DMBQGYN+EqhGJJYZMvUMHpByAKceIKpYuGUqmLjFESIm6pQORgpSJwNYoYsiQsSfB9utSUBKZYgcs1dI/4s+8Z2NQf54MMUnzAUk5Jil0kd+58v48GSJM0ryriQXJUZcrF70J0rh6wCSF/wVYfgaWn+kBRusjUMaBMg72at89MN6eoBxOGIPpRXqBhxdfCmkFyCC1wGh9hPH2VOXt67sCprsDOGFcxV4maoDlZ0AZB9lRUAZ4ttEL9NxAWK7aEtmr/VUZprtDbYme3z9re/Jnk00vqh50wljYZFEukcZdVCIqwCUitU1NL1IGSkT6HNjLBArKoKDsquZNUfuazjbQcwPpydWBm8ZrAVSRu69MGcSYBLzVpd+EGO7ijNr+togQYxJww12cH18/nn4Aw1rF5Pti/U4AAAAASUVORK5CYII=",o.onclick=o.onkeypress=function(t){if("keypress"!=(t=t||window.event).type||n(t)){var o=e.getFrameDimension();e.zoomTo(e.getZoomLevel()+1,o[0]/2,o[1]/2)}};var r=document.createElement("img");r.className="jqvsiv_toolbarButton",r.title="Zoom out",r.tabIndex="1",r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA3klEQVRIiWNQm7FPX2PmgbPqMw/805h54D81MNSss2oz9ukzaMw8cJZaBmPBZxmo6XJsPmGgoev/a8w88H/UglELaGiB/+rT/xO3XCQK+68+TZoF2rMO/v/z999/YsHvP3//a/Rtoq0FyrWz/6v2biQ+iHwWHfgfPW8rUdhj8pr/CtWz/itUz8KwBG8kq/ZsgGskBSNbQjAVUWoJUcmUEkuIzgfkWkJSRiPHEpJzMqmWkFVUkGIJ2VUmMZbIV87+R1GlT8gS+do5VxkobbZgs0S+cvY/+do5V5WalpgCAJUZolx/yaTFAAAAAElFTkSuQmCC",r.onclick=r.onkeypress=function(t){if("keypress"!=(t=t||window.event).type||n(t)){var o=e.getFrameDimension();e.zoomTo(e.getZoomLevel()-1,o[0]/2,o[1]/2)}};var i=document.createElement("img");if(i.className="jqvsiv_toolbarButton",i.title="Center image",i.tabIndex="1",i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABmklEQVRIic3WvWrCUBQH8LyJomiCQwO+Q7u0bl0FX0MsqCA6CEIXa+LXJqhQQUEc2pBqEWkJlXQrzSA6VKEfLkUo5t+hNURNNNEUeuGMOb+bc8/hXsKd4WiK4QWS4WWK4WFF/OYS3BmOJiiGF6xKrBECYeXOtf6E+MPdg2J4/H+AzrURaPStBU4q9/AWOqBzbXSGr5jLMvzVrnVAU5rg4eUD3dEbAODmaQgynIcrVd8f8LA8prMvLNbt8whkOA97iIU9xK4hpoHTSwHqJQzG8ESLCrCKmAaSPUlJ/v45Q0OUcHheXQLUiGkgci0i3urBl67BcZZdS7yKbAU87E9Zkj0JEe4R1AUHZ6y0MbE6dIHjyh2a0mTpQOOtHpyxkilEF/AWOuiPp0sH6kvXYA+xphBdgM61lT5fHKi65kYRTWAxoYs+FwZjNERp7WMjiCYQaPQxl2VlQj3RIo40WtEIolsif7W7NKGbYhOysU1dqbrhdtRDts7BvoihK3NXxBbMyoYv/V0QR6IsEmaeLUYRWzArOxJlkUxfHXwDNFegvBR/iaAAAAAASUVORK5CYII=",i.onclick=i.onkeypress=function(t){("keypress"!=(t=t||window.event).type||n(t))&&e.reset()},c){var a=document.createElement("img");a.className="jqvsiv_toolbarButton",a.title="Center image",a.tabIndex="1",a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAB1ElEQVRIieXWwUvbYBjH8fwndRW7CoID3Wn3nYSdxIviQQa7bHdp62GIXvTiEBpTqUyZssKglk4UtJlawUmKshUtgtV6kMEs2m2lmpjvLrbM2TdrY3Yy8FwS+H3e503e943kCa60emVVeyirpldWcaKuszRPcKVV8sqq5lRwldIkJ0derRPpP44er6xyj4BXS2mKuoGcOuLR5KqzwJO3G6znTjEB48rk16XOSDLjDPBi4Quiq2k0ejegL75TCTvOFzCBC8Pg8PScrlCM2a1deiMb9oGD/E8A3iRSdIfjZL+f44+u4fYr9E4tVHCPRSdC4FlkC4CzYonGgEKDb+JGuf0KZ8USAB3jH4TTJQReLn0FYDN7ciu8XJvZEwCezyzS4JuoigiBnvltAHL5ghDI5QsAPB2LVO79jQiBFuUTPy50ALrD8VvhPeGPAJR0gwf+m8/+RCxf8nByH66//YFYkvbhadqGphmIJbkyTQB80bWq3ZURS6BZVpn6nBGug/daRjh9ZeTfKzmYoG9OZXnviOKlTkk3SOW+0anMW4aXq7a9KJigcfBdTYH2gDsg9W3XNpD6j8w6EFe/Yto79GtEXIFQWrL922KBuPoV0xUIpd2vZx7/Bh7Ty4bjzETnAAAAAElFTkSuQmCC",a.onclick=a.onkeypress=function(t){("keypress"!=(t=t||window.event).type||n(t))&&e.rotate("1")};var m=document.createElement("img");m.className="jqvsiv_toolbarButton",m.title="Center image",m.tabIndex="1",m.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAACQklEQVRIie3W3U9SYRwH8POfcEDj0Mtcq7XVP9BVra2tyy5aba1/wQOI2dxq3rQSeQ4qIdiLthZtNcSXc0wj8zgQCSEqmHOYLwnMCBU559uFwxREXoK7nu13+/38nme/59lDMcaRJjXhvYxJkDREQC2KMQmSmvBexjjSRKkJ761VcH6pCe+latn5YTuh6hWeq/9AbYBbb+cwubi+ubG9s5PYykhDkVVcfzP7b8BxIuDSgAjiXQAABJZ+Sh3DIh7xHoRX4llJlmFyzy9UDVwZFAEAsY10+pkYRKO+G+fv9+NMex9UWjN63X7IMnB74H2gKuCO04/cevc5Aprl8NLzBR3DImiWg0prxtfVBJyBKBru2T9WDOgmwsup7Qx6Pvhx4UF/AUCzHCxuP+K/N0GzXFGkKHCKjKcbW3vDuTCa5fB0Oojp6A+cbbeBZjn0TQX2AJrl0NBmK0COnCLGOBpX6syLuYATrRY8nwnhKnFA3dKDWOIXnIEo9jeRj5QcU+axK3bTNpRSac17Icf03XgxE0JWknHx4eABYBf5e1wlgRuvxVhWkhBaXgc34YN1KoDIWhKZrAStY7IgPB8p66Jds7jmHL5v+L6WxFIyhaH5KC53vioavh8pC2CIICvb7J9KBR5WZb9FjGlcUhmsYt2AXWQsSxusnroBGiJAY+IzSoN1tmyAIYJcKcJ0jW0pW574S4UrWCJRDBF8Fe+CCGC6+LRCbwkeCTRzQepkp+t01d8W02hKqTv4nOQ6VzRzQdVd+7k/U9So5+j1RlYAAAAASUVORK5CYII=",m.onclick=m.onkeypress=function(t){("keypress"!=(t=t||window.event).type||n(t))&&e.rotate("-1")}}t.appendChild(o),t.appendChild(r),c&&(t.appendChild(a),t.appendChild(m)),t.appendChild(i),e.frameElement.appendChild(t)}}}(jQuery);
